---
testName: "TestSystemLaunch"
testCase:
  eCR-problem:
    fileData:
      ClientDataToBeSaved: "R4/Misc/ClientDetails/ClientDataEntry1.json"
      SystemLaunchPayload: "R4/Misc/SystemLaunchPayload/systemLaunchRequest.json"
    resourceMappingData:
      Patient:
      - params: "12742571"
        responseFilePath: "R4/Patient/Patient_12742571.json"
      Encounter:
      - params: "97953900"
        responseFilePath: "R4/Encounter/Encounter_withOneParticipant.json"
      Practitioner:
      - params: "11817978"
        responseFilePath: "R4/Practitioner/Practitioner_11817978.json"
      Organization:
      - params: "675844"
        responseFilePath: "R4/Organization/Organization.json"
      Condition:
      - params:
          patient: "12742571"
        responseFilePath: "R4/Condition/ConditionBundle_d2572364249.json"
    otherMappingData:
      metadata: "R4/Misc/MetaData_r4.json"
      token: "R4/Misc/AccessToken.json"
      default: "R4/Misc/NoDataFound_Default.json"
    validate:
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section"
      title: "PROBLEMS - DIAGNOSES"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/text/table/thead/tr/th"
      count: 2
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/text/table/thead/tr"
      'th[1]': "Problem or Diagnosis"
      'th[2]': "Problem Status"
#    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/text/table/tbody/tr"
#      count: 1
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/text/table/tbody/tr[1]/td"
      count: 2
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/text/table/tbody/tr[1]"
      'td[1]/content': "Disease caused by 2019-nCoV"
      'td[2]/content': "Active"
#    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry"
#      count: 1
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]"
      '@typeCode': "DRIV"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act"
      '@classCode': "ACT"
      '@moodCode': "EVN"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/templateId"
      count: 2
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act"
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.4.3"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.4.3"
      'templateId[2]/@extension': "2015-08-01"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/id"
      count: 1
#    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/id[1]"
#      '@root': ""
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/code"
      '@code': "CONC"
      '@codeSystem': "2.16.840.1.113883.5.6"
      '@codeSystemName': "HL7ActClass"
      '@displayName': "Concern"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/statusCode"
      '@code': "active"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/effectiveTime/low"
      '@value': "20200514"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/entryRelationship"
      count: 2
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/entryRelationship[1]"
      '@typeCode': "SUBJ"
      'observation/@classCode': "OBS"
      'observation/@moodCode': "EVN"
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/entryRelationship[1]/observation/templateId"
      count: 2
    - xPath: "/ClinicalDocument/component/structuredBody/component[1]/section/entry[1]/act/entryRelationship[1]/observation"
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.4.4"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.4.4"
      'templateId[2]/@extension': "2015-08-01"
      'code/@code': "282291009"
      'code/@codeSystem': "2.16.840.1.113883.6.96"
      'code/@codeSystemName': "SNOMED-CT"
      'code/@displayName': "Diagnosis"
      'code/translation/@code': "29308-4"
      'code/translation/@codeSystem': "2.16.840.1.113883.6.1"
      'code/translation/@codeSystemName': "LOINC"
      'code/translation/@displayName': "Diagnosis"
      'statusCode/@code': "completed"
      'effectiveTime/low/@vaue': "20200514"
